{
  "id": "wslg-support",
  "version": "1.0.0",
  "name": "Windows WSL GUI Support",
  "description": "Adds Windows WSL based GUI, GPU and accelerated video support to a development container.",
  "documentationURL": "https://github.com/jjs105/devcontainers/tree/main/features/src/wsl2-gui-support",
  "licenseURL": "https://github.com/jjs105/devcontainers/tree/main/LICENSE",
  "keywords": [
    "development container", "devcontainer",
    "WSL", "GUI", "WSLg",
    "Linux GUI", "Windows GUI", "WSL2",
    "X11", "Wayland", "PulseAudio",
    "vGPU", "accelerated video", "video playback"
  ],
  "dependsOn": {
    "ghcr.io/jjs105/features/jjs105-devcontainer:latest": {
      "install-lib": true
    }
  },
  "postStartCommand": "/opt/jjs105/bin/check-wslg-options.sh",
  "options": {
    "install-x11-apps": {
      "type": "boolean",
      "default": true,
      "description": "Install the X11 app (e.g. xeyes, xclock, etc.)."
    },
    "install-mesa-utils": {
      "type": "boolean",
      "default": true,
      "description": "Install the Mesa utilities (e.g. glxinfo, glxgears)."
    },
    "check-device-dxg": {
      "type": "boolean",
      "default": true,
      "description": "On startup check the /dev/dxg device (vGPU support)."
    },
    "check-device-video": {
      "type": "boolean",
      "default": true,
      "description": "On startup check the /dev/dri/card0+renderD128 devices (acc. video support)."
    }
  },
  "containerEnv": {
    "LD_LIBRARY_PATH": "/usr/lib/wsl/lib",
    "LIBVA_DRIVER_NAME": "d3d12"
  },
  "mounts": [
      { "source": "/tmp/.X11-unix", "target": "/tmp/.X11-unix", "type": "bind" },
      { "source": "/mnt/wslg", "target": "/mnt/wslg", "type": "bind" },
      { "source": "/usr/lib/wsl", "target": "/usr/lib/wsl", "type": "bind" },
  ]
}